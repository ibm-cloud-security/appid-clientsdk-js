<!DOCTYPE html>
<html lang="en">
<head>
    <title>Sample App</title>
    <link rel='stylesheet' href='index.css'/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <style>
        .bottom-container {
            justify-content: center;
            margin: 0 25%;
            display: inline;
        }
        #id_token {
            margin-bottom: 30px;
        }
    </style>
</head>
<body>
<div class="main-container">
    <div class="logo">
        <img class="logo-icon" src="images/app_id_icon.svg">
    </div>
    <div class="text-div" id="header">
        Welcome to your<br/>App ID SPA sample
    </div>
    <div class="text-div" id="welcome">
    </div>
    <div id="login-button-div" class="flex-top">
            <button id="login" class="button">Login</button>
    </div>
    <div class="bottom-container">
        <div class="flex-bottom" id="id_token"></div>
        <div class="flex-bottom" id="access_token"></div>
    </div>
</div>
</div>
<script src="js/jwt-decode.min.js"></script>
<script type='text/javascript' src="/dist/AppIDClient.js"></script>
<script>
  (async function () {
    const appID = new AppID();
    await appID.init({
      clientID: '1632d97a-e317-48fc-8826-8e90047d96c3',
      discoveryUrl: 'http://localhost:6002/oauth/v4/612a838c-7332-4a6f-9772-5da1e53facec/.well-known/openid-configuration'
    });
    // clientID: '21317af4-fe86-4ff6-86ab-3e2bfb981984',
    // discoveryUrl: 'http://localhost:6002/oauth/v4/5b1eb5f1-34bd-41fd-b6dd-e257c188a4dd/.well-known/openid-configuration'
    document.getElementById('login').addEventListener('click', async () => {
    let tokens = await appID.signinWithPopup();
    if (tokens) {
        let decodeIDToken = jwt_decode(tokens.id_token);
        let decodeAccessToken = jwt_decode(tokens.access_token);
        document.getElementById('welcome').innerHTML = 'Hello, ' + decodeIDToken.name;
        document.getElementById('id_token').innerHTML = JSON.stringify(decodeIDToken);
        document.getElementById('access_token').innerHTML = JSON.stringify(decodeAccessToken);
        document.getElementById("login").style.display = 'none';
    }
    });
	})()
</script>
</body>
</html>
